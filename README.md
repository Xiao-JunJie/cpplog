### 当前的性能
在我的i5-7500 16G内存 4核 2.3GHz 的个人pc机上单线程写入一百万条日志平均在2.2s的时间
### 优化的记录
最开始的日志刷入磁盘的方法是每写一条到内存都会立即刷进磁盘，这种情况写需要180s左右。  
考虑到磁盘的写入比较耗时，加入缓冲区组件std::deque，先将日志写到缓冲区，使用单独的写入磁盘线程将日志定期集中写入磁盘，优化到5s完成百万条日志写入。  
从自测的结果看，deque的push和pop比较耗时。因此尝试使用自实现的缓冲区，经多次运行验证后将时间优化到2.3s完成百万条日志写入。  
review代码时发现刷入磁盘线程定时睡眠检查chunk的状态会出现不可刷入磁盘的“空醒”情况，修改为一个chunk写满后用信号量通知写入磁盘线程。经多次运行验证后将时间优化到2.2s完成百万条日志写入。  
![img_1.png](img_1.png)  
下一步的优化目标：减少拷贝和系统调用的情况发生。
### 使用方法
如果你的g++编译器支持C++ 11及以上版本，copy Log下的头文件和源代码后可以轻松加入到项目中并运行起来。  
具体的使用方法参见main.cpp
